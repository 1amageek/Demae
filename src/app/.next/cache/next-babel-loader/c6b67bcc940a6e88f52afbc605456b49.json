{"ast":null,"code":"var _jsxFileName = \"/Users/1amageek/Desktop/Demae/src/app/hooks/auth/index.tsx\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState, createContext, useContext } from 'react';\nimport firebase from \"firebase\";\nimport \"firebase/firestore\";\nimport \"firebase/auth\";\n\nconst _useAuthUser = () => {\n  const {\n    0: state,\n    1: setState\n  } = useState({\n    loading: true\n  });\n  useEffect(() => {\n    let enabled = true;\n    let listener = firebase.auth().onAuthStateChanged(auth => {\n      if (enabled) {\n        setState({\n          data: auth,\n          loading: false,\n          error: undefined\n        });\n      }\n    }, error => {\n      if (enabled) {\n        setState({\n          data: undefined,\n          loading: false,\n          error: error\n        });\n      }\n    });\n    return () => {\n      enabled = false;\n      listener();\n    };\n  }, []);\n  return [state.data, state.loading, state.error];\n};\n\nexport const AuthContext = createContext([undefined, true, undefined]);\nexport const AuthProvider = ({\n  children\n}) => {\n  const [auth, isLoading, error] = _useAuthUser();\n\n  return __jsx(AuthContext.Provider, {\n    value: [auth, isLoading, error],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 12\n    }\n  }, \" \", children, \" \");\n};\nexport const useAuthUser = () => {\n  return useContext(AuthContext);\n};","map":{"version":3,"sources":["/Users/1amageek/Desktop/Demae/src/app/hooks/auth/index.tsx"],"names":[],"mappings":";;AAAA,OAAO,KAAP,IAAgB,SAAhB,EAA2B,QAA3B,EAAqC,aAArC,EAAoD,UAApD,QAAsE,OAAtE;AACA,OAAO,QAAP,MAAqB,UAArB;AACA,OAAO,oBAAP;AACA,OAAO,eAAP;;AAEA,MAAM,YAAY,GAAG,MAAiE;AAMrF,QAAM;AAAA,OAAC,KAAD;AAAA,OAAQ;AAAR,MAAoB,QAAQ,CAAO;AAAE,IAAA,OAAO,EAAE;AAAX,GAAP,CAAlC;AACA,EAAA,SAAS,CAAC,MAAK;AACd,QAAI,OAAO,GAAG,IAAd;AACA,QAAI,QAAQ,GAAG,QAAQ,CAAC,IAAT,GAAgB,kBAAhB,CAAmC,IAAI,IAAG;AACxD,UAAI,OAAJ,EAAa;AACZ,QAAA,QAAQ,CAAC;AACR,UAAA,IAAI,EAAE,IADE;AAER,UAAA,OAAO,EAAE,KAFD;AAGR,UAAA,KAAK,EAAE;AAHC,SAAD,CAAR;AAKA;AACD,KARc,EAQZ,KAAK,IAAG;AACV,UAAI,OAAJ,EAAa;AACZ,QAAA,QAAQ,CAAC;AACR,UAAA,IAAI,EAAE,SADE;AAER,UAAA,OAAO,EAAE,KAFD;AAGR,UAAA,KAAK,EAAE;AAHC,SAAD,CAAR;AAKA;AACD,KAhBc,CAAf;AAiBA,WAAO,MAAK;AACX,MAAA,OAAO,GAAG,KAAV;AACA,MAAA,QAAQ;AACR,KAHD;AAIA,GAvBQ,EAuBN,EAvBM,CAAT;AAwBA,SAAO,CAAC,KAAK,CAAC,IAAP,EAAa,KAAK,CAAC,OAAnB,EAA4B,KAAK,CAAC,KAAlC,CAAP;AACA,CAhCD;;AAkCA,OAAO,MAAM,WAAW,GAAG,aAAa,CAAwE,CAAC,SAAD,EAAY,IAAZ,EAAkB,SAAlB,CAAxE,CAAjC;AACP,OAAO,MAAM,YAAY,GAAG,CAAC;AAAE,EAAA;AAAF,CAAD,KAAoC;AAC/D,QAAM,CAAC,IAAD,EAAO,SAAP,EAAkB,KAAlB,IAA2B,YAAY,EAA7C;;AACA,SAAO,MAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAE,CAAC,IAAD,EAAO,SAAP,EAAkB,KAAlB,CAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAyD,QAAzD,MAAP;AACA,CAHM;AAKP,OAAO,MAAM,WAAW,GAAG,MAA4E;AACtG,SAAO,UAAU,CAAC,WAAD,CAAjB;AACA,CAFM","sourcesContent":["import React, { useEffect, useState, createContext, useContext } from 'react'\r\nimport firebase from \"firebase\"\r\nimport \"firebase/firestore\"\r\nimport \"firebase/auth\"\r\n\r\nconst _useAuthUser = (): [firebase.User | undefined, boolean, firebase.auth.Error?] => {\r\n\tinterface Prop {\r\n\t\tdata?: firebase.User\r\n\t\tloading: boolean\r\n\t\terror?: firebase.auth.Error\r\n\t}\r\n\tconst [state, setState] = useState<Prop>({ loading: true })\r\n\tuseEffect(() => {\r\n\t\tlet enabled = true\r\n\t\tlet listener = firebase.auth().onAuthStateChanged(auth => {\r\n\t\t\tif (enabled) {\r\n\t\t\t\tsetState({\r\n\t\t\t\t\tdata: auth as firebase.User,\r\n\t\t\t\t\tloading: false,\r\n\t\t\t\t\terror: undefined\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}, error => {\r\n\t\t\tif (enabled) {\r\n\t\t\t\tsetState({\r\n\t\t\t\t\tdata: undefined,\r\n\t\t\t\t\tloading: false,\r\n\t\t\t\t\terror: error\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn () => {\r\n\t\t\tenabled = false\r\n\t\t\tlistener()\r\n\t\t}\r\n\t}, []);\r\n\treturn [state.data, state.loading, state.error]\r\n}\r\n\r\nexport const AuthContext = createContext<[firebase.User | undefined, boolean, firebase.auth.Error | undefined]>([undefined, true, undefined])\r\nexport const AuthProvider = ({ children }: { children: any }) => {\r\n\tconst [auth, isLoading, error] = _useAuthUser()\r\n\treturn <AuthContext.Provider value={[auth, isLoading, error]}> {children} </AuthContext.Provider>\r\n}\r\n\r\nexport const useAuthUser = (): [firebase.User | undefined, boolean, firebase.auth.Error | undefined] => {\r\n\treturn useContext(AuthContext)\r\n}\r\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}