{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/Users/1amageek/Desktop/Demae/src/app/components/checkout/CartItemCell.tsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { createStyles, makeStyles } from '@material-ui/core/styles';\nimport { Box, Avatar, Tooltip, IconButton } from '@material-ui/core';\nimport ImageIcon from '@material-ui/icons/Image';\nimport { useUser, useCart } from 'hooks/commerce';\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport RemoveCircleIcon from '@material-ui/icons/RemoveCircle';\nimport Cart from 'models/commerce/Cart';\nvar useStyles = makeStyles(theme => createStyles({\n  avater: {\n    width: theme.spacing(10),\n    height: theme.spacing(10)\n  }\n}));\nexport default _c2 = React.forwardRef(_c = _s((_ref, ref) => {\n  _s();\n\n  var {\n    groupID,\n    cartItem\n  } = _ref;\n  var classes = useStyles();\n  var [user] = useUser();\n  var [cart] = useCart();\n\n  var addItem = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator(function* (event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      if (user) {\n        if (cart) {\n          cart.addItem(cartItem, groupID);\n          yield cart.save();\n        } else {\n          var _cart = new Cart(user.id);\n\n          _cart.addItem(cartItem, groupID);\n\n          yield _cart.save();\n        }\n      }\n    });\n\n    return function addItem(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var deleteItem = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator(function* (event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      if (!cart) {\n        return;\n      }\n\n      cart.subtractItem(cartItem, groupID);\n      yield cart.save();\n    });\n\n    return function deleteItem(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var imageURL = cartItem.imageURLs().length > 0 ? cartItem.imageURLs()[0] : undefined;\n  var price = new Intl.NumberFormat('ja-JP', {\n    style: 'currency',\n    currency: cartItem.currency\n  }).format(cartItem.price());\n  var subtotal = new Intl.NumberFormat('ja-JP', {\n    style: 'currency',\n    currency: cartItem.currency\n  }).format(cartItem.subtotal());\n  return __jsx(Box, {\n    display: \"flex\",\n    padding: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }\n  }, __jsx(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 4\n    }\n  }, __jsx(Avatar, {\n    className: classes.avater,\n    variant: \"rounded\",\n    src: imageURL,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }\n  }, __jsx(ImageIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 6\n    }\n  }))), __jsx(Box, {\n    flexGrow: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 4\n    }\n  }, __jsx(Box, {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    flexGrow: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }, __jsx(Box, {\n    mx: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 6\n    }\n  }, __jsx(Box, {\n    flexGrow: 1,\n    fontWeight: 600,\n    fontSize: 18,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  }, cartItem.name, __jsx(Box, {\n    fontSize: 16,\n    fontWeight: 400,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 8\n    }\n  }, cartItem.caption), __jsx(Box, {\n    fontSize: 16,\n    fontWeight: 400,\n    color: \"text.secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 8\n    }\n  }, price))), __jsx(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 6\n    }\n  }, __jsx(Box, {\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    fontSize: 18,\n    fontWeight: 500,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }, subtotal), __jsx(Box, {\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    alignItems: \"center\",\n    mx: 0,\n    my: 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }, __jsx(Tooltip, {\n    title: \"Remove\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 8\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, __jsx(IconButton, {\n    onClick: deleteItem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 10\n    }\n  }, __jsx(RemoveCircleIcon, {\n    color: \"inherit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  })))), __jsx(Box, {\n    fontWeight: 600,\n    fontSize: 20,\n    mx: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 8\n    }\n  }, cartItem.quantity), __jsx(Tooltip, {\n    title: \"Add\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 8\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, __jsx(IconButton, {\n    onClick: addItem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 10\n    }\n  }, __jsx(AddCircleIcon, {\n    color: \"inherit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  })))))))));\n}, \"iWJxAUNsPtCl+zydNqrIl230iO8=\", false, function () {\n  return [useStyles, useUser, useCart];\n}));\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"%default%$React.forwardRef\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/1amageek/Desktop/Demae/src/app/components/checkout/CartItemCell.tsx"],"names":[],"mappings":"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","sourcesContent":["\r\nimport React from 'react';\r\nimport firebase from 'firebase'\r\nimport { createStyles, Theme, makeStyles } from '@material-ui/core/styles';\r\nimport { Box, Avatar, Tooltip, IconButton } from '@material-ui/core';\r\nimport ImageIcon from '@material-ui/icons/Image';\r\nimport { useUser, useCart } from 'hooks/commerce';\r\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\r\nimport RemoveCircleIcon from '@material-ui/icons/RemoveCircle';\r\nimport Cart, { CartItem } from 'models/commerce/Cart'\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n\tcreateStyles({\r\n\t\tavater: {\r\n\t\t\twidth: theme.spacing(10),\r\n\t\t\theight: theme.spacing(10),\r\n\t\t}\r\n\t})\r\n)\r\n\r\nexport default React.forwardRef(({ groupID, cartItem }: { groupID: string, cartItem: CartItem }, ref) => {\r\n\r\n\tconst classes = useStyles()\r\n\tconst [user] = useUser()\r\n\tconst [cart] = useCart()\r\n\r\n\tconst addItem = async (event) => {\r\n\t\tevent.preventDefault()\r\n\t\tevent.stopPropagation()\r\n\t\tif (user) {\r\n\t\t\tif (cart) {\r\n\t\t\t\tcart.addItem(cartItem, groupID)\r\n\t\t\t\tawait cart.save()\r\n\t\t\t} else {\r\n\t\t\t\tconst cart = new Cart(user.id)\r\n\t\t\t\tcart.addItem(cartItem, groupID)\r\n\t\t\t\tawait cart.save()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst deleteItem = async (event) => {\r\n\t\tevent.preventDefault()\r\n\t\tevent.stopPropagation()\r\n\t\tif (!cart) { return }\r\n\t\tcart.subtractItem(cartItem, groupID)\r\n\t\tawait cart.save()\r\n\t}\r\n\r\n\tconst imageURL = (cartItem.imageURLs().length > 0) ? cartItem.imageURLs()[0] : undefined\r\n\tconst price = new Intl.NumberFormat('ja-JP', { style: 'currency', currency: cartItem.currency }).format(cartItem.price())\r\n\tconst subtotal = new Intl.NumberFormat('ja-JP', { style: 'currency', currency: cartItem.currency }).format(cartItem.subtotal())\r\n\r\n\treturn (\r\n\t\t<Box display='flex' padding={2}>\r\n\t\t\t<Box>\r\n\t\t\t\t<Avatar className={classes.avater} variant=\"rounded\" src={imageURL}>\r\n\t\t\t\t\t<ImageIcon />\r\n\t\t\t\t</Avatar>\r\n\t\t\t</Box>\r\n\t\t\t<Box flexGrow={1}>\r\n\t\t\t\t<Box display=\"flex\" justifyContent=\"space-between\" flexGrow={1}>\r\n\t\t\t\t\t<Box mx={2}>\r\n\t\t\t\t\t\t<Box flexGrow={1} fontWeight={600} fontSize={18}>\r\n\t\t\t\t\t\t\t{cartItem.name}\r\n\t\t\t\t\t\t\t<Box fontSize={16} fontWeight={400}>\r\n\t\t\t\t\t\t\t\t{cartItem.caption}\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box fontSize={16} fontWeight={400} color='text.secondary'>\r\n\t\t\t\t\t\t\t\t{price}\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"flex-end\" fontSize={18} fontWeight={500} >\r\n\t\t\t\t\t\t\t{subtotal}\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"flex-end\" alignItems=\"center\" mx={0} my={0}>\r\n\t\t\t\t\t\t\t<Tooltip title='Remove'>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<IconButton onClick={deleteItem}>\r\n\t\t\t\t\t\t\t\t\t\t<RemoveCircleIcon color='inherit' />\r\n\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t<Box fontWeight={600} fontSize={20} mx={1}>\r\n\t\t\t\t\t\t\t\t{cartItem.quantity}\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Tooltip title='Add'>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<IconButton onClick={addItem}>\r\n\t\t\t\t\t\t\t\t\t\t<AddCircleIcon color='inherit' />\r\n\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t</Box>\r\n\t\t</Box>\r\n\t)\r\n})\r\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}